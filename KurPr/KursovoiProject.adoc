:imagesdir: Image22
:toc:
:toc-title: Оглавление
= Курсовая работа

== Задание к курсовой работе
Выполнено студентами: Мисюрев А.И. , Васильев М.Д.


image::ТЗ_1.PNG[canvas, size=cover]
image::ТЗ_2.PNG[canvas, size=cover]
image::ТЗ_3.PNG[canvas, size=cover]

== 1) Анализ требований

=== 1.1) Переменный резистор

Переменный резистор (или потенциометр) - это резистор, у которого электрическое сопротивление между подвижным контактом
и выводами резистивного элемента можно изменять механическим способом.

Снимаемое с подвижного отводного контакта потенциометра напряжение может изменяться от нуля до максимального значения,
равного приложенному к потенциометру напряжению, в зависимости от текущего положения подвижного контакта.

Величина снимаемого напряжения может как линейно зависеть от перемещения движка, так и логарифмически, поэтому
потенциометры подразделяются на линейные и логарифмические.

image::ПЕРЕ_РЕЗ.PNG[]
Рисунок 1 -- Схема работы переменного резистора

image::ПЕРЕ_РЕЗ_2.PNG[]
Рисунок 2 -- Схема потенциомента в отладочной плате STM32F411RE

Мультиметром измерим напряжение подаваемое на переменный резистор. И зная что АЦП преобразовывает
в цифрой вид от 1 до 4095, ТО получим уравнение представленное ниже:

U = buf*v/4095,

где, buf -- оцифровонное значение напряжения с АЦП;
     v -- напряжение подаваемое на переменный резистор.

=== 1.2) Температурный сенсор

Датчик температуры используется для измерения температуры окружающей среды устройства.
На рис. 3 показана блок-схема датчика температуры.

Примечание. Бит TSVREFE должен быть установлен, чтобы разрешить преобразование обоих внутренних каналов:
ADC1_IN16 или ADC1_IN18 (датчик температуры).
Основные характеристики:
• Поддерживаемый диапазон температур: от –40 до 125 °C.
• Точность: ±1,5 °C


image::ТЕМП_СЕН.PNG[]
Рисунок 3 -- Блок-схема температурного сенсара

Выход температурного сенсора так же будет обрабатывать АЦП и
получать цифоровые данные. И по формуле представленной ниже
будет расчитывать значение температуры.

T = buf *k+b,

где, buf -- оцифровонное значение температуры с АЦП;

k = 25-0.76/0.0025;

b = 3.3*0.0025/4095;

Все необходимые неизвестные были взяты из даташита на температурный сенсор.

=== 1.3) Аналого-цифровой преобразователь

Аналого-цифровой преобразователь – устройство, которое принимает аналоговые сигналы и генерирует соответствующий им
цифровой код, пригодный для дальнейшей обработки микропроцессором или другим цифровым устройством.

Сперва АЦП преобразует аналоговый сигнал в дискретный, чтобы разбить измеряемый диапазон на какое-то конечное
количество значений. Такой процесс называется квантованием.

Основными характеристиками АЦП можно назвать частоту преобразования, которая выражается в отсчетах в секунду (samples
per second) и разрядность (количество шагов) – в битах.


Почти во всех микроконтроллерах STM32, АЦП выполнено по схеме 12-битного АЦП последовательного приближения
(SAR ADC), структурная схема которая показана на рисунке 4.

image::ТЕМП_СЕН_2.PNG[]
Рисунок 4 -- Структурная схема АЦП

Он включает в себя:

-- Компаратор, регистр последовательного приближения (SAR), цифро-аналоговый преобразователь (ЦАП).

-- Регистр последовательного приближения осуществляет алгоритм последовательного приближения, генерируя текущее значение
кода, подающегося на вход ЦАП, на основе которого ЦАП генерирует выходное напряжение.

-- Компаратор сравнивает значение входного сигнала с сигналом выхода ЦАП. Данный вид преобразователя измеряет величину
входного сигнала, осуществляя ряд последовательных «взвешиваний» (сравнений) измеряемой величины с 1/2, 1/4, 1/8, и
т.д. от ее возможного максимального значения.

-- Допустим, что сигнал находится в интервале (0 – Uоп), тогда с приходом первого тактового импульса регистра
последовательного приближения на выходе встроенного ЦАП устанавливается величина, равная половине Uоп. Если сигнал превышает эту величину, тогда его сравнивают с напряжением 3/4 Uоп, которое находится посередине оставшегося интервала. Если сигнал меньше установленного уровня, то следующее сравнение будет производиться с меньшей половиной оставшегося интервала (т.е. с уровнем 1/4 Uоп). Такое сравнение повторяется N раз и на выходе получается N бит результата.

Основные параметры АЦП, используемого в данной работе:

-- Напряжение питания: Vdd = 1.7 - 3.6 В (стндартное значение Vdd = 3.3 В);

-- Опорное напряжение: Vref = 1.7 - Vdd;


